# 项目结构说明

## 整体目录结构

```
ruoyi-plus-soybean/
├── .git/                      # Git 版本控制
├── .gitee/                    # Gitee 配置
├── .github/                   # GitHub 配置
├── .vscode/                   # VSCode 编辑器配置
├── build/                     # 构建配置和插件
│   ├── config/               # 构建配置文件
│   └── plugins/              # Vite 插件配置
├── docs/                      # 项目文档
│   ├── java/                 # Java 代码生成工具类
│   ├── sql/                  # 数据库脚本
│   └── template/             # 代码生成模板
├── node_modules/              # 依赖包（自动生成）
├── packages/                  # Monorepo 包
│   ├── alova/                # Alova HTTP 客户端实现
│   ├── axios/                # Axios HTTP 客户端实现
│   ├── color/                # 颜色管理工具
│   ├── hooks/                # Vue 组合函数库
│   ├── materials/            # UI 组件和材料库
│   ├── scripts/              # 构建和开发脚本
│   └── utils/                # 通用工具函数库
├── public/                    # 静态资源（不经过构建）
│   ├── favicon.svg           # 网站图标
│   └── streamsaver/          # StreamSaver 库
├── src/                       # 主应用源代码
│   ├── assets/               # 静态资源（经过构建）
│   ├── components/           # 可复用的 Vue 组件
│   ├── constants/            # 应用常量
│   ├── enum/                 # TypeScript 枚举
│   ├── hooks/                # Vue 组合函数
│   ├── layouts/              # 页面布局
│   ├── locales/              # 国际化语言包
│   ├── plugins/              # Vue 插件
│   ├── router/               # Vue Router 配置
│   ├── service/              # API 服务
│   ├── store/                # Pinia 状态管理
│   ├── styles/               # 全局样式
│   ├── theme/                # 主题配置
│   ├── typings/              # TypeScript 类型定义
│   ├── utils/                # 工具函数
│   ├── views/                # 页面组件
│   ├── App.vue               # 根组件
│   └── main.ts               # 应用入口
├── .drone.yml                 # Drone CI 配置
├── .editorconfig              # 编辑器配置
├── .env                       # 环境变量（基础）
├── .env.dev                   # 开发环境变量
├── .env.prod                  # 生产环境变量
├── .env.test                  # 测试环境变量
├── .gitattributes             # Git 属性配置
├── .gitignore                 # Git 忽略文件
├── .npmrc                     # npm 配置
├── CHANGELOG.md               # 更新日志
├── LICENSE                    # 开源许可证
├── MIGRATION_PLAN.md          # 迁移计划
├── README.md                  # 项目说明
├── eslint.config.js           # ESLint 配置
├── index.html                 # HTML 入口文件
├── package.json               # 项目依赖和脚本
├── pnpm-lock.yaml             # pnpm 锁文件
├── pnpm-workspace.yaml        # pnpm 工作区配置
├── tsconfig.json              # TypeScript 配置
└── vite.config.ts             # Vite 配置
```

## 核心目录详解

### 1. build/ - 构建配置

```
build/
├── config/                    # 构建配置文件
│   ├── proxy.ts              # 开发代理配置
│   └── ...
└── plugins/                   # Vite 插件
    ├── index.ts              # 插件入口
    ├── vue.ts                # Vue 插件配置
    ├── vue-jsx.ts            # Vue JSX 插件配置
    ├── unplugin.ts           # Unplugin 配置
    ├── progress.ts           # 构建进度插件
    └── ...
```

**用途说明**:
- `config/`: 存放构建相关的配置文件，如代理配置、环境变量处理等
- `plugins/`: Vite 插件配置，包括 Vue、自动导入等插件的配置

### 2. packages/ - Monorepo 包

```
packages/
├── alova/                     # Alova HTTP 客户端
│   ├── src/
│   │   ├── index.ts          # 导出入口
│   │   ├── request.ts        # 请求封装
│   │   └── ...
│   ├── package.json
│   └── tsconfig.json
├── axios/                     # Axios HTTP 客户端
│   ├── src/
│   │   ├── index.ts          # 导出入口
│   │   ├── instance.ts       # Axios 实例
│   │   ├── request.ts        # 请求封装
│   │   └── ...
│   ├── package.json
│   └── tsconfig.json
├── color/                     # 颜色管理工具
│   ├── src/
│   │   ├── index.ts          # 导出入口
│   │   ├── palette.ts        # 调色板生成
│   │   └── ...
│   ├── package.json
│   └── tsconfig.json
├── hooks/                     # Vue 组合函数库
│   ├── src/
│   │   ├── index.ts          # 导出入口
│   │   ├── use-boolean.ts    # 布尔值管理
│   │   ├── use-loading.ts    # 加载状态管理
│   │   ├── use-context.ts    # 上下文管理
│   │   └── ...
│   ├── package.json
│   └── tsconfig.json
├── materials/                 # UI 组件和材料库
│   ├── src/
│   │   ├── index.ts          # 导出入口
│   │   ├── button/           # 按钮组件
│   │   ├── icon/             # 图标组件
│   │   └── ...
│   ├── package.json
│   └── tsconfig.json
├── scripts/                   # 构建和开发脚本
│   ├── src/
│   │   ├── index.ts          # 导出入口
│   │   ├── git-commit.ts     # Git 提交脚本
│   │   ├── release.ts        # 发布脚本
│   │   └── ...
│   ├── bin.ts                # CLI 入口
│   ├── package.json
│   └── tsconfig.json
└── utils/                     # 通用工具函数库
    ├── src/
    │   ├── index.ts          # 导出入口
    │   ├── crypto.ts         # 加密工具
    │   ├── storage.ts        # 存储工具
    │   ├── color.ts          # 颜色工具
    │   └── ...
    ├── package.json
    └── tsconfig.json
```

**包说明**:
- `@sa/alova`: 基于 Alova 的 HTTP 客户端封装
- `@sa/axios`: 基于 Axios 的 HTTP 客户端封装（默认使用）
- `@sa/color`: 颜色管理和调色板生成工具
- `@sa/hooks`: 可复用的 Vue 组合函数
- `@sa/materials`: UI 组件和材料库
- `@sa/scripts`: 项目构建和开发脚本
- `@sa/utils`: 通用工具函数库

### 3. src/ - 主应用源代码

```
src/
├── assets/                    # 静态资源
│   ├── imgs/                 # 图片资源
│   ├── svg-icon/             # SVG 图标
│   └── ...
├── components/                # 可复用组件
│   ├── advanced/             # 高级组件
│   │   ├── button-icon.vue   # 图标按钮
│   │   ├── count-to.vue      # 数字动画
│   │   ├── table-column-setting.vue  # 表格列设置
│   │   └── ...
│   ├── common/               # 通用组件
│   │   ├── better-scroll.vue # 滚动容器
│   │   ├── icon-picker.vue   # 图标选择器
│   │   └── ...
│   └── custom/               # 自定义业务组件
│       ├── dict-select.vue   # 字典选择
│       ├── dict-tag.vue      # 字典标签
│       └── ...
├── constants/                 # 应用常量
│   ├── app.ts                # 应用常量
│   ├── business.ts           # 业务常量
│   ├── common.ts             # 通用常量
│   └── ...
├── enum/                      # TypeScript 枚举
│   ├── common.ts             # 通用枚举
│   ├── system.ts             # 系统枚举
│   └── ...
├── hooks/                     # Vue 组合函数
│   ├── common/               # 通用 Hooks
│   │   ├── element-table.ts  # Element Plus 表格
│   │   ├── form.ts           # 表单处理
│   │   ├── icon.ts           # 图标处理
│   │   ├── request.ts        # 请求处理
│   │   ├── router.ts         # 路由处理
│   │   └── ...
│   └── business/             # 业务 Hooks
│       ├── auth.ts           # 认证相关
│       ├── dict.ts           # 字典相关
│       └── ...
├── layouts/                   # 页面布局
│   ├── base-layout/          # 基础布局
│   ├── blank-layout/         # 空白布局
│   ├── modules/              # 布局模块
│   │   ├── global-breadcrumb/  # 面包屑
│   │   ├── global-content/     # 内容区
│   │   ├── global-footer/      # 页脚
│   │   ├── global-header/      # 页头
│   │   ├── global-logo/        # Logo
│   │   ├── global-menu/        # 菜单
│   │   ├── global-search/      # 全局搜索
│   │   ├── global-sider/       # 侧边栏
│   │   ├── global-tab/         # 标签页
│   │   └── theme-drawer/       # 主题抽屉
│   └── ...
├── locales/                   # 国际化
│   ├── langs/                # 语言包
│   │   ├── en-US.ts          # 英文
│   │   └── zh-CN.ts          # 中文
│   ├── locale.ts             # 语言配置
│   └── index.ts              # 导出入口
├── plugins/                   # Vue 插件
│   ├── assets.ts             # 资源加载
│   ├── dayjs.ts              # 日期处理
│   ├── iconify.ts            # 图标库
│   ├── loading.ts            # 加载动画
│   ├── nprogress.ts          # 进度条
│   └── index.ts              # 导出入口
├── router/                    # 路由配置
│   ├── elegant/              # Elegant Router 生成文件
│   │   ├── imports.ts        # 路由导入
│   │   ├── routes.ts         # 路由定义
│   │   └── transform.ts      # 路由转换
│   ├── guard/                # 路由守卫
│   │   ├── index.ts          # 守卫入口
│   │   ├── progress.ts       # 进度条守卫
│   │   ├── route.ts          # 路由守卫
│   │   └── title.ts          # 标题守卫
│   ├── routes/               # 路由定义
│   │   └── builtin.ts        # 内置路由
│   └── index.ts              # 路由入口
├── service/                   # API 服务
│   ├── api/                  # API 接口定义
│   │   ├── auth.ts           # 认证接口
│   │   ├── route.ts          # 路由接口
│   │   ├── system.ts         # 系统接口
│   │   └── ...
│   ├── request/              # 请求配置
│   │   ├── index.ts          # 请求实例
│   │   └── ...
│   └── ...
├── store/                     # Pinia 状态管理
│   ├── modules/              # 状态模块
│   │   ├── app/              # 应用状态
│   │   ├── auth/             # 认证状态
│   │   ├── dict/             # 字典状态
│   │   ├── notice/           # 通知状态
│   │   ├── route/            # 路由状态
│   │   ├── tab/              # 标签页状态
│   │   └── theme/            # 主题状态
│   └── ...
├── styles/                    # 全局样式
│   ├── css/                  # CSS 样式
│   ├── scss/                 # SCSS 样式
│   │   ├── global.scss       # 全局样式
│   │   └── ...
│   └── element-plus.scss     # Element Plus 样式覆盖
├── theme/                     # 主题配置
│   ├── settings.ts           # 主题设置
│   └── ...
├── typings/                   # TypeScript 类型定义
│   ├── api.d.ts              # API 类型
│   ├── app.d.ts              # 应用类型
│   ├── element-plus.d.ts     # Element Plus 类型
│   ├── env.d.ts              # 环境变量类型
│   ├── global.d.ts           # 全局类型
│   ├── router.d.ts           # 路由类型
│   └── union-key.d.ts        # 联合类型
├── utils/                     # 工具函数
│   ├── common.ts             # 通用工具
│   ├── crypto.ts             # 加密工具
│   ├── form.ts               # 表单工具
│   ├── router.ts             # 路由工具
│   ├── service.ts            # 服务工具
│   ├── storage.ts            # 存储工具
│   └── ...
├── views/                     # 页面组件
│   ├── _builtin/             # 内置页面
│   │   ├── 403/              # 403 页面
│   │   ├── 404/              # 404 页面
│   │   ├── 500/              # 500 页面
│   │   ├── iframe-page/      # iframe 页面
│   │   ├── login/            # 登录页面
│   │   ├── social-callback/  # 社交登录回调
│   │   └── user-center/      # 用户中心
│   ├── home/                 # 首页
│   ├── system/               # 系统管理
│   │   ├── user/             # 用户管理
│   │   ├── role/             # 角色管理
│   │   ├── menu/             # 菜单管理
│   │   ├── dept/             # 部门管理
│   │   ├── post/             # 岗位管理
│   │   ├── dict/             # 字典管理
│   │   ├── config/           # 参数配置
│   │   ├── notice/           # 通知公告
│   │   ├── tenant/           # 租户管理
│   │   ├── tenant-package/   # 租户套餐
│   │   ├── client/           # 客户端管理
│   │   ├── oss/              # OSS 管理
│   │   └── oss-config/       # OSS 配置
│   ├── monitor/              # 系统监控
│   │   ├── online/           # 在线用户
│   │   ├── logininfor/       # 登录日志
│   │   ├── operlog/          # 操作日志
│   │   └── cache/            # 缓存监控
│   ├── tool/                 # 系统工具
│   │   └── gen/              # 代码生成
│   ├── demo/                 # 示例页面
│   └── about/                # 关于页面
├── App.vue                    # 根组件
└── main.ts                    # 应用入口
```

## 文件命名规范

### 1. Vue 组件
- **页面组件**: `kebab-case` (如 `user-list.vue`)
- **通用组件**: `PascalCase` (如 `UserProfile.vue`)
- **布局组件**: `kebab-case` (如 `base-layout.vue`)

### 2. TypeScript 文件
- **工具函数**: `kebab-case` (如 `common-utils.ts`)
- **类文件**: `PascalCase` (如 `UserService.ts`)
- **类型定义**: `kebab-case.d.ts` (如 `api.d.ts`)

### 3. 样式文件
- **全局样式**: `kebab-case` (如 `global.scss`)
- **组件样式**: 与组件同名 (如 `user-list.scss`)

### 4. 目录命名
- 统一使用 `kebab-case` (如 `user-management/`)

## 模块导入规范

### 1. 路径别名
```typescript
// @ 指向 src 目录
import { useAuthStore } from '@/store/modules/auth';

// ~ 指向项目根目录
import { setupVitePlugins } from '~/build/plugins';
```

### 2. Monorepo 包导入
```typescript
// 导入 hooks
import { useBoolean, useLoading } from '@sa/hooks';

// 导入 utils
import { localStg } from '@sa/utils';

// 导入 materials
import { SvgIcon } from '@sa/materials';
```

### 3. 相对路径导入
```typescript
// 同级目录
import { helper } from './helper';

// 父级目录
import { config } from '../config';
```

## 环境变量文件

### 1. .env - 基础环境变量
```bash
# 应用标题
VITE_APP_TITLE=RuoYi-Plus-Soybean

# 应用描述
VITE_APP_DESC=现代化企业级多租户管理系统
```

### 2. .env.dev - 开发环境
```bash
# 环境模式
NODE_ENV=development

# 后端 API 地址
VITE_SERVICE_BASE_URL=http://localhost:8080

# 其他开发环境配置...
```

### 3. .env.test - 测试环境
```bash
# 环境模式
NODE_ENV=production

# 后端 API 地址
VITE_SERVICE_BASE_URL=https://test-api.example.com

# 其他测试环境配置...
```

### 4. .env.prod - 生产环境
```bash
# 环境模式
NODE_ENV=production

# 后端 API 地址
VITE_SERVICE_BASE_URL=https://api.example.com

# 其他生产环境配置...
```

## 配置文件说明

### 1. package.json
- 项目依赖管理
- 脚本命令定义
- 项目元信息

### 2. tsconfig.json
- TypeScript 编译配置
- 路径别名配置
- 类型检查规则

### 3. vite.config.ts
- Vite 构建配置
- 插件配置
- 开发服务器配置
- 代理配置

### 4. eslint.config.js
- ESLint 代码检查规则
- 代码风格配置

### 5. pnpm-workspace.yaml
- pnpm 工作区配置
- Monorepo 包管理

## 构建产物

### 开发环境
```
内存中（不生成文件）
```

### 生产环境
```
dist/
├── assets/                    # 静态资源
│   ├── css/                  # CSS 文件
│   ├── js/                   # JavaScript 文件
│   └── ...
├── index.html                 # HTML 入口
└── ...
```

## 最佳实践

### 1. 目录组织
- 按功能模块组织代码
- 相关文件放在同一目录
- 避免过深的目录嵌套

### 2. 文件大小
- 单个文件不超过 500 行
- 复杂组件拆分为多个子组件
- 工具函数按功能分类

### 3. 导入顺序
```typescript
// 1. 第三方库
import { ref, computed } from 'vue';
import { useRoute } from 'vue-router';

// 2. Monorepo 包
import { useBoolean } from '@sa/hooks';
import { localStg } from '@sa/utils';

// 3. 项目内部模块
import { useAuthStore } from '@/store/modules/auth';
import { fetchUserList } from '@/service/api';

// 4. 相对路径导入
import { helper } from './helper';
import type { User } from './types';
```

### 4. 类型定义
- 全局类型放在 `src/typings/` 目录
- 模块类型放在模块内部
- 使用 `.d.ts` 文件定义类型

### 5. 样式组织
- 全局样式放在 `src/styles/` 目录
- 组件样式使用 `<style scoped>`
- 优先使用 UnoCSS 工具类
